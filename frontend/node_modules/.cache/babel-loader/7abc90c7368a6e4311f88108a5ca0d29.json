{"ast":null,"code":"var _jsxFileName = \"/Users/garvitgupta/Documents/Development/CEN5035-Software-Engineering-Project/frontend/src/components/DeleteButton.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { IconButton } from '@chakra-ui/react';\nimport { DeleteIcon } from '@chakra-ui/icons';\nimport { createErrorSelector } from '../selectors';\nimport { startDeletePost, startDeleteComment } from '../actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DeleteButton = _ref => {\n  _s();\n\n  let {\n    type = 'post',\n    error,\n    id,\n    startDeletePost,\n    startDeleteComment\n  } = _ref;\n  const hasError = useRef(error);\n  useEffect(() => {\n    let isMounted = true;\n\n    if (isMounted) {\n      hasError.current = error;\n    }\n\n    return () => {\n      isMounted = false;\n    };\n  }, [error]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleClick = async () => {\n    setIsLoading(true);\n\n    if (type === 'post') {\n      await startDeletePost(id);\n    } else {\n      await startDeleteComment(id);\n    }\n\n    if (!hasError.current) {\n      setIsLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(IconButton, {\n    onClick: handleClick,\n    isLoading: isLoading,\n    backgroundColor: \"inherit\",\n    icon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DeleteButton, \"d8eFl1es9s2SsJulOWO9CJ6N4Kc=\");\n\n_c = DeleteButton;\nconst errorSelector = createErrorSelector(['DELETE_POST', 'DELETE_COMMENT'], false);\n\nconst mapStateToProps = state => ({\n  error: errorSelector(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  startDeletePost: id => dispatch(startDeletePost(id)),\n  startDeleteComment: id => dispatch(startDeleteComment(id))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DeleteButton);\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteButton\");","map":{"version":3,"sources":["/Users/garvitgupta/Documents/Development/CEN5035-Software-Engineering-Project/frontend/src/components/DeleteButton.js"],"names":["useState","useEffect","useRef","connect","IconButton","DeleteIcon","createErrorSelector","startDeletePost","startDeleteComment","DeleteButton","type","error","id","hasError","isMounted","current","isLoading","setIsLoading","handleClick","errorSelector","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,mBAAT,QAAoC,cAApC;AACA,SAASC,eAAT,EAA0BC,kBAA1B,QAAoD,YAApD;;;AAEA,MAAMC,YAAY,GAAG,QAMf;AAAA;;AAAA,MANgB;AACpBC,IAAAA,IAAI,GAAG,MADa;AAEpBC,IAAAA,KAFoB;AAGpBC,IAAAA,EAHoB;AAIpBL,IAAAA,eAJoB;AAKpBC,IAAAA;AALoB,GAMhB;AACJ,QAAMK,QAAQ,GAAGX,MAAM,CAACS,KAAD,CAAvB;AAEAV,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIa,SAAS,GAAG,IAAhB;;AACA,QAAIA,SAAJ,EAAe;AACbD,MAAAA,QAAQ,CAACE,OAAT,GAAmBJ,KAAnB;AACD;;AACD,WAAO,MAAM;AACXG,MAAAA,SAAS,GAAG,KAAZ;AACD,KAFD;AAGD,GARQ,EAQN,CAACH,KAAD,CARM,CAAT;AAUA,QAAM,CAACK,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC,KAAD,CAA1C;;AACA,QAAMkB,WAAW,GAAG,YAAY;AAC9BD,IAAAA,YAAY,CAAC,IAAD,CAAZ;;AACA,QAAIP,IAAI,KAAK,MAAb,EAAqB;AACnB,YAAMH,eAAe,CAACK,EAAD,CAArB;AACD,KAFD,MAEO;AACL,YAAMJ,kBAAkB,CAACI,EAAD,CAAxB;AACD;;AACD,QAAI,CAACC,QAAQ,CAACE,OAAd,EAAuB;AACrBE,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,GAVD;;AAYA,sBACE,QAAC,UAAD;AACE,IAAA,OAAO,EAAEC,WADX;AAEE,IAAA,SAAS,EAAEF,SAFb;AAGE,IAAA,eAAe,EAAC,SAHlB;AAIE,IAAA,IAAI,eAAE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAJR;AAAA;AAAA;AAAA;AAAA,UADF;AAQD,CAxCD;;GAAMP,Y;;KAAAA,Y;AA0CN,MAAMU,aAAa,GAAGb,mBAAmB,CACvC,CAAC,aAAD,EAAgB,gBAAhB,CADuC,EAEvC,KAFuC,CAAzC;;AAKA,MAAMc,eAAe,GAAIC,KAAD,KAAY;AAClCV,EAAAA,KAAK,EAAEQ,aAAa,CAACE,KAAD;AADc,CAAZ,CAAxB;;AAIA,MAAMC,kBAAkB,GAAIC,QAAD,KAAe;AACxChB,EAAAA,eAAe,EAAGK,EAAD,IAAQW,QAAQ,CAAChB,eAAe,CAACK,EAAD,CAAhB,CADO;AAExCJ,EAAAA,kBAAkB,EAAGI,EAAD,IAAQW,QAAQ,CAACf,kBAAkB,CAACI,EAAD,CAAnB;AAFI,CAAf,CAA3B;;AAKA,eAAeT,OAAO,CAACiB,eAAD,EAAkBE,kBAAlB,CAAP,CAA6Cb,YAA7C,CAAf","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IconButton } from '@chakra-ui/react';\r\nimport { DeleteIcon } from '@chakra-ui/icons';\r\nimport { createErrorSelector } from '../selectors';\r\nimport { startDeletePost, startDeleteComment } from '../actions';\r\n\r\nconst DeleteButton = ({\r\n  type = 'post',\r\n  error,\r\n  id,\r\n  startDeletePost,\r\n  startDeleteComment,\r\n}) => {\r\n  const hasError = useRef(error);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    if (isMounted) {\r\n      hasError.current = error;\r\n    }\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [error]);\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const handleClick = async () => {\r\n    setIsLoading(true);\r\n    if (type === 'post') {\r\n      await startDeletePost(id);\r\n    } else {\r\n      await startDeleteComment(id);\r\n    }\r\n    if (!hasError.current) {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IconButton\r\n      onClick={handleClick}\r\n      isLoading={isLoading}\r\n      backgroundColor=\"inherit\"\r\n      icon={<DeleteIcon />}\r\n    />\r\n  );\r\n};\r\n\r\nconst errorSelector = createErrorSelector(\r\n  ['DELETE_POST', 'DELETE_COMMENT'],\r\n  false\r\n);\r\n\r\nconst mapStateToProps = (state) => ({\r\n  error: errorSelector(state),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  startDeletePost: (id) => dispatch(startDeletePost(id)),\r\n  startDeleteComment: (id) => dispatch(startDeleteComment(id)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DeleteButton);\r\n"]},"metadata":{},"sourceType":"module"}